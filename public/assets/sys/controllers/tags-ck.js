function TagsCtrl(e,t,n,r){var i="http://"+window.location.host;e.url=i+"/ajax/tags/load-tags";e.saveUrl=i+"/ajax/tags/store-tag";e.deleteUrl=i+"/ajax/tags/delete-tag";e.init=function(t,n,r){e.data={entity:t,entity_id:n};e.load(!0)};e.load=function(r){n.post(e.url,e.data).success(function(n,i){e.tags=n;r?t.$broadcast("tagsLoaded"):t.$broadcast("tagsUpdated")}).error(function(e,t){e&&alert("Se ha producido un error al cargar las etiquetas.")})};e.create=function(){e.saveData={entity:e.data.entity,entity_id:e.data.entity_id,tag:e.tagName};n.post(e.saveUrl,e.saveData).success(function(n,r){e.load(!1);e.tagName="";t.$broadcast("tagCreated")}).error(function(e,t){e&&alert("Se ha producido un error al guardar la etiqueta.")})};e.delete=function(){e.saveData={entity:e.data.entity,entity_id:e.data.entity_id,tag:e.tagName};n.post(e.saveUrl,e.saveData).success(function(n,r){e.load(!1);e.tagName="";t.$broadcast("tagCreated")}).error(function(e,t){e&&alert("Se ha producido un error al guardar la etiqueta.")})}};